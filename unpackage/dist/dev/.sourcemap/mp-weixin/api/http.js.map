{"version":3,"file":"http.js","sources":["api/http.js"],"sourcesContent":["let baseUrl = 'https://apifoxmock.com/m1/4728220-0-default/api'\n\n// 通过环境来判断\nif (process.env.NODE_ENV === 'development') {\n\t// baseUrl = 'http://localhost:5173/api'\n\tbaseUrl = 'https://apifoxmock.com/m1/4728220-0-default/api'\n} else {\n\tbaseUrl = 'https://apifoxmock.com/m1/4728220-0-default/api'\n}\n\nexport default function http(url, data={}, method = 'GET') {\n\t// 对外支持链式调用\n\treturn new Promise((resolve, reject) => {\r\n\t\n\t\tuni.request({\n\t\t\turl: baseUrl + url,\n\t\t\tdata,\n\t\t\tmethod,\n\t\t\theader: {\n\t\t\t\t'token': uni.getStorageSync('token') || ''\n\t\t\t},\n\t\t\tsuccess: res => {\r\n\t\t\t\t// console.log(\"res\",res.data)\r\n\t\t\t\t\n\t\t\t\t// http 状态码\n\t\t\t\tif (res.statusCode == 200) {\n\t\t\t\t\tif (res.data.code == 1) {\n\t\t\t\t\t\tresolve(res.data.data)\n\t\t\t\t\t} else if (res.data.code == 0) {\n\t\t\t\t\t\tuni.showToast({\n\t\t\t\t\t\t\ttitle: res.data.msg,\n\t\t\t\t\t\t\ticon: 'none'\n\t\t\t\t\t\t})\n\t\t\t\t\t\treject(res.data.msg)\n\t\t\t\t\t}\n\t\t\t\t}\n\t\t\t},\n\t\t\tfail: () => {\n\t\t\t\tuni.showToast({\n\t\t\t\t\ttitle: '服务器请求异常',\n\t\t\t\t\ticon: 'none'\n\t\t\t\t})\n\t\t\t}\n\t\t})\n\t})\n}"],"names":["uni"],"mappings":";;AAAA,IAAI,UAAU;AAG8B;AAEjC,YAAA;AACX;AAIA,SAAwB,KAAK,KAAK,OAAK,CAAA,GAAI,SAAS,OAAO;AAE1D,SAAO,IAAI,QAAQ,CAAC,SAAS,WAAW;AAEvCA,kBAAAA,MAAI,QAAQ;AAAA,MACX,KAAK,UAAU;AAAA,MACf;AAAA,MACA;AAAA,MACA,QAAQ;AAAA,QACP,SAASA,cAAA,MAAI,eAAe,OAAO,KAAK;AAAA,MACzC;AAAA,MACA,SAAS,CAAO,QAAA;AAIX,YAAA,IAAI,cAAc,KAAK;AACtB,cAAA,IAAI,KAAK,QAAQ,GAAG;AACf,oBAAA,IAAI,KAAK,IAAI;AAAA,UACX,WAAA,IAAI,KAAK,QAAQ,GAAG;AAC9BA,0BAAAA,MAAI,UAAU;AAAA,cACb,OAAO,IAAI,KAAK;AAAA,cAChB,MAAM;AAAA,YAAA,CACN;AACM,mBAAA,IAAI,KAAK,GAAG;AAAA,UACpB;AAAA,QACD;AAAA,MACD;AAAA,MACA,MAAM,MAAM;AACXA,sBAAAA,MAAI,UAAU;AAAA,UACb,OAAO;AAAA,UACP,MAAM;AAAA,QAAA,CACN;AAAA,MACF;AAAA,IAAA,CACA;AAAA,EAAA,CACD;AACF;;"}